{% extends 'admin/adminbase.html' %}

{% block title %}Organizations{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/admin/organization-filter.js') }}?v={{ cache_version }}"></script>
{% endblock %}

{% block head_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/organization.css') }}?v={{ cache_version }}">
{% endblock %}

{% block additional_content %}
<!-- Search and Categories Block -->
<div class="search-categories-block">
  <div class="search-container mb-3">
    <input type="text" class="form-control" id="organizationSearch" placeholder="Search organizations...">
  </div>
  <div class="categories-container">
    <div class="category-pills">
      <button class="category-pill active" data-category="all">All</button>
      <button class="category-pill" data-category="Religious">Religious</button>
      <button class="category-pill" data-category="Arts">Arts</button>
      <button class="category-pill" data-category="Outreach">Outreach</button>
      <button class="category-pill" data-category="Academic">Academic</button>
      <button class="category-pill" data-category="Indigenous People">Indigenous People</button>
      <button class="category-pill" data-category="Sports">Sports</button>
      <button class="category-pill" data-category="Gender">Gender</button>
    </div>
  </div>
</div>
{% endblock %}

{% block content %}
<div class="container-fluid">
  
  <div class="row row-eq-height g-3" role="list">
    {% if organizations %}
      {% for org in organizations %}
        <div class="col-12 col-sm-6 col-md-3" role="listitem" data-type="{{ org.type }}">
          <div class="card card-custom">
            <div class="card-header-custom">
              {% if org.logo_id %}
                <img
                  src="{{ url_for('user_organization.get_logo', logo_id=org.logo_id) }}"
                  alt="{{ org.organization_name }} logo"
                  width="64"
                  height="64"
                >
              {% else %}
                <img
                  src="https://placehold.co/64x64/png?text=Logo"
                  alt="Organization logo"
                  width="64"
                  height="64"
                >
              {% endif %}
              <div class="text-start">{{ org.organization_name }}</div>
            </div>
            <div class="card-footer-custom">
              <a href="{{ url_for('admin_routes.organizationdetails', organization_id=org.organization_id) }}" class="btn btn-primary">View Details</a>
            </div>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <div class="col-12 text-center mt-4">
        <p class="text-dark" style="font-size: 0.75rem;">— No active organizations found —</p>
      </div>
    {% endif %}
    


  </div>
</div>
{% endblock %}