{% extends 'base.html' %}

{% block title %}Student Organization Announcement{% endblock %}

{% block head_css %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>
  body {
    background-color: #d3dbe9;
    color: #0f3b47;
    font-family: 'Inter', sans-serif;
  }
  
  .org-header {
    text-align: left;
    color: #0f3c4a;
    font-weight: 600;
    font-size: 1.125rem;
    margin-bottom: 0.5rem;
  }

  .divider {
    border-top: 1px solid #0f3c4a;
    margin-bottom: 1.5rem;
  }
  
  h1 {
    font-weight: 800;
    font-size: 2rem;
    line-height: 1.2;
    color: #0f3b47;
  }

  p {
    color: #0f3b47;
  }
  
  .btn-custom-primary {
    background-color: #4a6df5;
    color: white;
    border-radius: 0.375rem;
    padding: 0.25rem 1rem;
    font-size: 0.875rem;
    font-weight: 400;
    border: none;
  }
  
  .btn-custom-primary:hover,
  .btn-custom-primary:focus {
    background-color: #3b5de0;
    color: white;
  }
  
  .tab-btn {
    border: 1px solid #0f3b47;
    font-size: 0.875rem;
    font-weight: 400;
    color: #0f3b47;
    padding: 0.375rem 1rem;
    cursor: pointer;
    background-color: #d3dbe9;
  }
  
  .tab-btn.active {
    background-color: white;
    font-weight: 600;
    border-bottom-color: white;
    margin-bottom: -1px;
    position: relative;
    z-index: 1;
  }
  
  .tab-btn.create-announcement {
    border-top-left-radius: 0.25rem;
    border-bottom-left-radius: 0;
  }
  
  .tab-btn.sent-history {
    border-top-right-radius: 0.25rem;
    border-bottom-right-radius: 0;
  }
  
  .table thead {
    background-color: #0f3b47;
    color: white;
    font-weight: 600;
    font-size: 0.875rem;
  }
  
  .table tbody tr {
    border-bottom: 1px solid #0f3b47;
    color: #0f3b47;
    font-size: 0.875rem;
    font-weight: 400;
  }
  
  .container-custom {
    max-width: 900px;
  }
  
  .card-custom {
    border: 1px solid #0f3b47;
    border-radius: 0 0.5rem 0.5rem 0.5rem;
    background-color: white;
    padding: 1.5rem;
    overflow-x: auto;
    position: relative;
  }
  
  input,
  textarea {
    background-color: #eaeaea !important;
    border: 1px solid #ccc !important;
    color: #0f3b47 !important;
    font-size: 0.875rem !important;
    font-weight: 400 !important;
    border-radius: 0.375rem !important;
  }
  
  textarea {
    resize: none;
  }
  
  .btn-send {
    background-color: #3b63f5;
    color: white;
    font-size: 0.875rem;
    font-weight: 400;
    border-radius: 0.375rem;
    padding: 0.375rem 1.25rem;
    border: none;
  }
  
  .btn-send:hover,
  .btn-send:focus {
    background-color: #2a50d8;
    color: white;
  }
  
  .hidden {
    display: none;
  }
  
  .form-label {
    color: #0f3b47;
    font-size: 0.875rem;
  }

  /* Announcement Details Modal Styles */
  .announcement-details-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1050;
    overflow-y: auto;
    padding: 1.5rem;
  }

  .announcement-details-modal.show {
    display: flex;
  }
  
  .modal-container {
    max-width: 900px;
    background: #fff;
    border-radius: 1rem;
    padding: 2rem 2.5rem;
    position: relative;
    box-shadow: 0 0 6px rgb(0 0 0 / 0.1);
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    text-align: left;
  }

  .btn-back {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    background-color: #e2e6e7;
    color: #0f3a40;
    font-weight: 600;
    border-radius: 0.375rem;
    padding: 0.375rem 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    border: none;
    cursor: pointer;
  }

  .btn-back:hover,
  .btn-back:focus {
    background-color: #d6dbdc;
    color: #0f3a40;
    outline: none;
    box-shadow: none;
  }

  .modal-section h2,
  .modal-section h3 {
    font-weight: 800;
    text-transform: uppercase;
    color: #0f3a40;
    margin-bottom: 1rem;
    font-size: 1.125rem;
    line-height: 1.2;
    text-align: left;
  }

  .modal-section hr {
    border-color: #4a6a70;
    margin-top: 1.5rem;
    margin-bottom: 2rem;
  }
  
  .announcement-content {
    background-color: #f8f9fa;
    border-radius: 0.5rem;
    padding: 1.5rem;
    margin-top: 1rem;
    border: 1px solid #dee2e6;
  }
  
  .announcement-metadata {
    margin-bottom: 1.5rem;
    font-size: 0.875rem;
  }
  
  .announcement-metadata p {
    margin-bottom: 0.5rem;
  }

  .announcement-message {
    white-space: pre-line;
    line-height: 1.2;
    color: #0f3b47cb;
    font-size: 0.875rem;
  }

  /* Responsive styles */
  @media (max-width: 576px) {
    h1 {
      font-size: 1.5rem;
    }
    
    .card-custom {
      padding: 1rem;
    }
    
    .table {
      font-size: 0.8125rem;
    }
    
    .table th {
      font-size: 0.75rem;
    }
    
    .modal-container {
      padding: 1.5rem 1.5rem;
    }
    
    .modal-section h2,
    .modal-section h3 {
      font-size: 1rem;
    }
    
    .btn-back {
      font-size: 0.75rem;
      padding: 0.25rem 0.75rem;
    }
  }
</style>
{% endblock %}

{% block content %}
<div class="container">
  <h2 class="org-header">Send Announcement</h2>
  <hr class="divider">
  <main class="d-flex flex-column align-items-center">
    <h1 class="text-center mt-4">
      Student Organization Announcement
    </h1>
    <p class="text-center fs-5 mt-2 mb-4">
      Create and send announcements to student organizations
    </p>
  </main>

  <div class="container container-custom py-4">
    <div class="d-flex mb-0">
      <button type="button" id="tab-create" class="tab-btn create-announcement active">Create Announcement</button>
      <button type="button" id="tab-history" class="tab-btn sent-history">Sent History</button>
    </div>
    
    <!-- Create Announcement Tab Content -->
    <div class="card-custom" id="create-content">
      <form id="announcement-form">
        <div class="mb-3">
          <label for="subject" class="form-label text-start d-block">Subject</label>
          <input type="text" id="subject" class="form-control" />
        </div>
        <div class="mb-3">
          <label for="message" class="form-label text-start d-block">Message Content</label>
          <textarea id="message" rows="8" class="form-control"></textarea>
        </div>
        <div class="d-flex justify-content-end">
          <button type="submit" class="btn-send">Send Announcement</button>
        </div>
      </form>
    </div>
    
    <!-- Sent History Tab Content -->
    <div class="card-custom hidden" id="history-content">
      <table class="table mb-0" style="min-width: 600px;">
        <thead>
          <tr>
            <th scope="col" class="py-2 px-2">Date Sent</th>
            <th scope="col" class="py-2 px-2">Subject</th>
            <th scope="col" class="py-2 px-2">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="py-2 px-2">May 15, 2023</td>
            <td class="py-2 px-2">Summer Break Activities</td>
            <td class="py-2 px-2">
              <button type="button" class="btn btn-custom-primary" onclick="openAnnouncementModal('May 15, 2023', 'Summer Break Activities', 'Dear Student Organization Leaders,\n\nWe hope this message finds you well as we approach the end of the academic year. We are excited to share information about the various activities planned for the summer break.\n\n1. Campus Facilities Access: The main campus buildings will be open from 8:00 AM to 5:00 PM on weekdays throughout the summer. The library will maintain special summer hours which can be found on the university website.\n\n2. Summer Workshops: We are hosting a series of leadership and skill development workshops during the summer. These workshops are designed to help you enhance your organization management skills and prepare for the upcoming academic year.\n\n3. Funding Applications: Summer is an excellent time to prepare your funding applications for the fall semester. The online portal will open on July 1st, and early submissions will be prioritized.\n\nPlease share this information with your organization members who might be staying on campus during the summer break.\n\nBest regards,\nOffice of Student Organizations')">View Details</button>
            </td>
          </tr>
          <tr>
            <td class="py-2 px-2">May 10, 2023</td>
            <td class="py-2 px-2">End of Year Ceremony</td>
            <td class="py-2 px-2">
              <button type="button" class="btn btn-custom-primary" onclick="openAnnouncementModal('May 10, 2023', 'End of Year Ceremony', 'Dear Student Organization Officers,\n\nWe are pleased to invite you to the End of Year Ceremony for all student organizations. This event will celebrate the achievements and contributions of your organizations throughout the academic year.\n\nEvent Details:\n- Date: May 30, 2023\n- Time: 3:00 PM - 5:00 PM\n- Location: University Grand Hall\n- Dress Code: Semi-formal\n\nEach organization is requested to send at least two representatives. Awards for Outstanding Organization, Community Service, and Innovation will be presented during the ceremony.\n\nPlease RSVP by May 20 through the student portal.\n\nWe look forward to celebrating with you!\n\nSincerely,\nDean of Student Affairs')">View Details</button>
            </td>
          </tr>
          <tr>
            <td class="py-2 px-2">May 1, 2023</td>
            <td class="py-2 px-2">Renewal Opening</td>
            <td class="py-2 px-2">
              <button type="button" class="btn btn-custom-primary" onclick="openAnnouncementModal('May 1, 2023', 'Renewal Opening', 'Dear Student Organization Leaders,\n\nThis announcement is to inform you that the annual organization renewal process for the upcoming academic year is now open. All registered student organizations must complete the renewal process to maintain active status.\n\nRenewal Process:\n1. Update your organization\'s constitution and bylaws if necessary\n2. Submit a list of officers for the upcoming year\n3. Provide a summary of activities from the current year\n4. Outline planned activities for the upcoming year\n5. Confirm faculty advisor commitment\n\nThe deadline for submission is June 15, 2023. Organizations that fail to complete the renewal process by this date will need to reapply as new organizations in the fall.\n\nIf you have any questions about the renewal process, please contact the Office of Student Organizations.\n\nBest regards,\nStudent Organizations Coordinator')">View Details</button>
            </td>
          </tr>
          <tr>
            <td class="py-2 px-2">Apr 20, 2023</td>
            <td class="py-2 px-2">Campus Clean-up Day</td>
            <td class="py-2 px-2">
              <button type="button" class="btn btn-custom-primary" onclick="openAnnouncementModal('Apr 20, 2023', 'Campus Clean-up Day', 'Dear Student Organization Representatives,\n\nThe University Environmental Committee is organizing a Campus Clean-up Day on April 30, 2023, from 9:00 AM to 12:00 PM. We invite all student organizations to participate in this important community service event.\n\nParticipating organizations will receive:\n- Community service hours for all members who attend\n- Recognition on the university\'s sustainability website\n- Entry into a drawing for additional funding for your organization\n\nPlease register your organization\'s participation by April 25 through the Environmental Committee\'s webpage. Indicate the number of members who will be attending so we can prepare sufficient supplies and refreshments.\n\nAll participants should meet at the Campus Center at 8:45 AM. Gloves, trash bags, and other cleaning supplies will be provided.\n\nThank you for your commitment to keeping our campus beautiful!\n\nEnvironmental Committee Chair')">View Details</button>
            </td>
          </tr>
          <tr>
            <td class="py-2 px-2">Apr 15, 2023</td>
            <td class="py-2 px-2">Leadership Workshop</td>
            <td class="py-2 px-2">
              <button type="button" class="btn btn-custom-primary" onclick="openAnnouncementModal('Apr 15, 2023', 'Leadership Workshop', 'Dear Student Leaders,\n\nWe are excited to announce an upcoming Leadership Workshop designed specifically for student organization officers. This workshop will provide valuable insights and practical skills to enhance your leadership effectiveness.\n\nWorkshop Details:\n- Date: April 25, 2023\n- Time: 2:00 PM - 4:30 PM\n- Location: Student Center, Room 205\n\nTopics covered will include:\n- Effective communication strategies\n- Conflict resolution techniques\n- Event planning and management\n- Member recruitment and retention\n- Financial management for student organizations\n\nEach organization is encouraged to send at least two representatives, preferably current or incoming officers. Certificates of participation will be provided, which can be included in your organization\'s annual report.\n\nPlease register by April 22 using the form available on the Student Affairs website.\n\nWe look forward to seeing you there!\n\nOffice of Leadership Development')">View Details</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Announcement Details Modal -->
<div id="announcementDetailsModal" class="announcement-details-modal" aria-labelledby="announcementDetailsModalTitle" aria-modal="true" role="dialog">
  <div class="modal-container">
    <button type="button" class="btn-back" onclick="closeAnnouncementModal()" aria-label="Close">
      <i class="fas fa-arrow-left"></i> Back
    </button>

    <section class="modal-section mb-4">
      <h2 id="announcementDetailsModalTitle">ANNOUNCEMENT DETAILS</h2>
      <div class="announcement-metadata">
        <p><strong>Date Sent:</strong> <span id="announcementDate">May 15, 2023</span></p>
        <p><strong>Subject:</strong> <span id="announcementSubject">Summer Break Activities</span></p>
      </div>
      <hr />
    </section>

    <section class="modal-section">
      <h3>MESSAGE CONTENT</h3>
      <div class="announcement-content">
        <div id="announcementMessage" class="announcement-message">
          <!-- Announcement message will be inserted here -->
        </div>
      </div>
    </section>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const tabCreate = document.getElementById('tab-create');
    const tabHistory = document.getElementById('tab-history');
    const createContent = document.getElementById('create-content');
    const historyContent = document.getElementById('history-content');
    
    tabCreate.addEventListener('click', function() {
      tabCreate.classList.add('active');
      tabHistory.classList.remove('active');
      createContent.classList.remove('hidden');
      historyContent.classList.add('hidden');
    });
    
    tabHistory.addEventListener('click', function() {
      tabHistory.classList.add('active');
      tabCreate.classList.remove('active');
      historyContent.classList.remove('hidden');
      createContent.classList.add('hidden');
    });
    
    document.getElementById('announcement-form').addEventListener('submit', function(e) {
      e.preventDefault();
      alert('Announcement sent successfully!');
    });
  });
  
  // Function to open the announcement modal with specific announcement data
  function openAnnouncementModal(date, subject, message) {
    // Update the modal contents with announcement information
    document.getElementById('announcementDate').textContent = date;
    document.getElementById('announcementSubject').textContent = subject;
    document.getElementById('announcementMessage').textContent = message;
    
    // Show the modal
    document.getElementById('announcementDetailsModal').classList.add('show');
    document.body.style.overflow = 'hidden'; // Prevent scrolling when modal is open
  }

  // Function to close the announcement modal
  function closeAnnouncementModal() {
    document.getElementById('announcementDetailsModal').classList.remove('show');
    document.body.style.overflow = ''; // Restore scrolling
  }

  // Close modal when clicking outside the modal content
  document.getElementById('announcementDetailsModal').addEventListener('click', function(event) {
    if (event.target === this) {
      closeAnnouncementModal();
    }
  });

  // Close modal when pressing Escape key
  document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
      closeAnnouncementModal();
    }
  });
</script>
{% endblock %}